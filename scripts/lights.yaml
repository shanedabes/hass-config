---
presence_lights:
  sequence:
    - service: script.living_room_lights
    - service: script.kitchen_lights
    - service: script.bedroom_lights
    - service: script.office_lights
    - service: script.bathroom_lights

living_room_lights:
  sequence:
    - choose:
        - conditions:
            - condition: state
              entity_id: input_boolean.living_room_presence
              state: 'on'

            - condition: sun
              after: sunrise
              after_offset: "-00:45:00"

          sequence:
            - service: switch.turn_on
              entity_id: switch.living_room_light_switch

      default:
        - service: switch.turn_off
          entity_id: switch.living_room_light_switch

kitchen_lights:
  sequence:
    - choose:
        - conditions:
            - condition: state
              entity_id: input_boolean.kitchen_presence
              state: 'on'

            - condition: sun
              after: sunrise
              after_offset: "-00:45:00"

          sequence:
            - service: switch.turn_on
              entity_id: switch.kitchen_light_switch

      default:
        - service: switch.turn_off
          entity_id: switch.kitchen_light_switch

bedroom_lights:
  sequence:
    - choose:
        - conditions:
            - condition: state
              entity_id: input_boolean.bedroom_presence
              state: 'on'

            - condition: sun
              after: sunrise
              after_offset: "-00:45:00"

          sequence:
            - service: switch.turn_on
              entity_id: switch.bedroom_light_switch

      default:
        - service: switch.turn_off
          entity_id: switch.bedroom_light_switch

office_lights:
  sequence:
    - choose:
        - conditions:
            - condition: state
              entity_id: input_boolean.office_presence
              state: 'on'

            - condition: sun
              after: sunrise
              after_offset: "-00:45:00"

          sequence:
            - service: switch.turn_on
              entity_id: switch.office_light_switch

      default:
        - service: switch.turn_off
          entity_id: switch.office_light_switch

bathroom_lights:
  sequence:
    - choose:
        - conditions:
            - condition: state
              entity_id: input_boolean.bathroom_presence
              state: 'on'

            - condition: sun
              after: sunrise
              after_offset: "-00:45:00"

          sequence:
            - service: switch.turn_on
              entity_id: switch.bathroom_light_switch

      default:
        - service: switch.turn_off
          entity_id: switch.bathroom_light_switch
